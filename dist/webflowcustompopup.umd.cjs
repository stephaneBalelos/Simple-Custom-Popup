(function(i,n){typeof exports=="object"&&typeof module<"u"?n(exports):typeof define=="function"&&define.amd?define(["exports"],n):(i=typeof globalThis<"u"?globalThis:i||self,n(i.WFCustomPopup={}))})(this,function(i){"use strict";function n(){const t=document.getElementById("popup-modal"),p=t.querySelector("[close-popup]"),r=document.querySelector("[open-popup]");let o=null;if(!t)return;const d={timeToTrigger:Math.abs(parseInt(t.getAttribute("time-to-trigger")||"0"))*1e3,popupId:t.getAttribute("popup-id")||""},f=()=>{const e=new Date;e.setTime(e.getTime()+365*24*60*60*1e3);const l="expires="+e.toUTCString();document.cookie=`popup-id-${d.popupId}=seen; ${l}; path=/`},m=()=>{const e="popup-id-"+d.popupId+"=seen",a=decodeURIComponent(document.cookie).split(";");for(let u=0;u<a.length;u++)if(a[u].trim().indexOf(e)===0)return!0;return!1},s=()=>{const e=document.activeElement;e&&e.blur(),t.style.display="none",t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex","-1"),t.setAttribute("aria-modal","false"),document.body.style.overflow="auto",o&&(clearTimeout(o),o=null)},c=()=>{t.style.display="flex",t.classList.add("show"),t.setAttribute("aria-hidden","false"),t.setAttribute("tabindex","0"),document.body.style.overflow="hidden",f(),o&&(clearTimeout(o),o=null)};t.addEventListener("click",e=>{e.target===t&&s()}),p&&p.addEventListener("click",e=>{e.preventDefault(),s()}),r&&r.addEventListener("click",e=>{e.preventDefault(),c()}),d.timeToTrigger>0&&!m()&&(o=setTimeout(()=>{c()},d.timeToTrigger)),document.addEventListener("keydown",e=>{e.key==="Escape"&&t.style.display==="flex"&&s()})}i.setupPopupModal=n,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
