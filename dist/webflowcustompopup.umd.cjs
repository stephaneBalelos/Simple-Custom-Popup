(function(n,p){typeof exports=="object"&&typeof module<"u"?p(exports):typeof define=="function"&&define.amd?define(["exports"],p):(n=typeof globalThis<"u"?globalThis:n||self,p(n.WFCustomPopup={}))})(this,function(n){"use strict";function p(){const e=document.getElementById("popup-modal"),d=e.querySelector("[close-popup]"),r=document.querySelector("[open-popup]");let i=null;if(!e)return;const o={timeToTrigger:Math.abs(parseInt(e.getAttribute("time-to-trigger")||"0"))*1e3,popupId:e.getAttribute("popup-id")||"",popupCache:e.getAttribute("popup-cache")==="true"},f=()=>{const t=new Date;if(!o.popupId){console.warn("Popup ID is not set. Cannot set seen cookie.");return}if(!o.popupCache){console.warn("Popup cache is disabled. Not setting seen cookie.");return}t.setTime(t.getTime()+24*60*60*1e3);const l="expires="+t.toUTCString();document.cookie=`popup-id-${o.popupId}=seen; ${l}; path=/`},m=()=>{if(!o.popupId||!o.popupCache)return!1;const t="popup-id-"+o.popupId+"=seen",a=decodeURIComponent(document.cookie).split(";");for(let u=0;u<a.length;u++)if(a[u].trim().indexOf(t)===0)return!0;return!1},s=()=>{const t=document.activeElement;t&&t.blur(),e.style.display="none",e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","-1"),e.setAttribute("aria-modal","false"),document.body.style.overflow="auto",i&&(clearTimeout(i),i=null)},c=()=>{e.style.display="flex",e.classList.add("show"),e.setAttribute("aria-hidden","false"),e.setAttribute("tabindex","0"),document.body.style.overflow="hidden",f(),i&&(clearTimeout(i),i=null)};e.addEventListener("click",t=>{t.target===e&&s()}),d&&d.addEventListener("click",t=>{t.preventDefault(),s()}),r&&r.addEventListener("click",t=>{t.preventDefault(),c()}),o.timeToTrigger>0&&!m()&&(i=setTimeout(()=>{c()},o.timeToTrigger)),document.addEventListener("keydown",t=>{t.key==="Escape"&&e.style.display==="flex"&&s()})}n.setupPopupModal=p,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
